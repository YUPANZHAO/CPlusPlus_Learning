## 有名管道

匿名管道由于没有名字，只能用于亲缘关系的进程间通信。为了克服这个缺点，提出了有名管道(FIFO)，也叫命名管道、FIFO文件。

有名管道(FIFO)不同于匿名管道之处在于它提供了一个路径名与之关联，以FIFO文件的形式存在于文件系统中，并且其打开方式与一个普通文件一样，这样即使是与创建FIFO的进程不存在亲缘关系的进程，主要能访问该路径，就能够彼此通过FIFO通信，因此，通过FIFO不相关的进程也能交换数据。

一旦打开了FIFO，就能在它上面使用与操作匿名管道和其他文件的系统调用一样的I/O系统调用了，如read()、write()和close()。与管道一样，FIFO也有一个写入端和读取端，并且从管道中读取的顺序与写入的顺序是一样的。FIFO的名称也由此而来：先入先出。

## 有名管道和匿名管道的区别

1、FIFO在文件系统中作为一个特殊文件存在，但FIFO中的内容却存放在内存中。

2、使用FIFO的进程退出后，FIFO文件将继续保存在文件系统中以便以后使用。

3、FIFO有名字，不相关的进程可以通过打开有名管道进行通信。

## 有名管道的使用

**通过命令创建有名管道**

    mkfifo 名字

**通过函数创建有名管道**

```cpp
#include <sys/types.h>
#include <sys/stat.h>
int mkfifo(const char *pathname, mode_t mode);
```

一旦使用mkfifo创建了一个FIFO，就可以使用open打开它，常见的文件I/O函数都可用于fifo。如：close、read、write、unlink等

FIFO严格遵循先进先出（First in First out），对管道及FIFO的读总是从开始处返回数据，对它们的写则把数据添加到末尾。它们不支持诸如lseek()等文件定位操作。

## 有名管道的注意事项

1、一个为只读而打开一个管道的进程会阻塞，直到另一个进程为只写打开管道。

2、一个为只写而打开一个管道的进程会阻塞，直到另一个进程为只读打开管道。

详细过程可看 [../匿名管道/README.md](../匿名管道/README.md)