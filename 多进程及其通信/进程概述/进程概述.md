## 什么是进程？

进程是程序的一次执行过程，是一个具有一定独立功能的程序关于某个数据集合的一次运行活动。

进程是操作系统动态执行的基本单元。在传统的操作系统中，进程即是资源分配的基本单元，也是执行的基本单元。

从内核的角度看，进程由用户内存空间和一系列内核数据结构组成。其中用户内存空间包含了程序代码及代码所使用的变量，而内核数据结构则用于维护进程状态信息，如进程标识号、虚拟内存表、打开的文件描述符表、信号传递及处理的有关信息、进程资源使用及限制、当前工作目录等。

## 进程控制块 (PCB)

内核会为每个进程分配一个PCB(Processing Control Block)进程控制块，维护进程的相关信息。

Linux内核的进程控制块是task_struct结构体。

在/usr/src/linux-headers-xxx/include/linux/sched.h文件中可以查看struct task_struct结构体的定义。其内部成员有很多，部分信息如下:

* 进程id
* 进程状态
* 进程切换时需要保存和恢复的一些CPU寄存器
* 描述虚拟地址空间的信息
* 描述控制终端的信息
* 当前工作目录
* umask掩码
* 文件描述符表
* 信号相关信息
* 用户id和组id
* 会话和进程组
* 进程可使用的资源上限

## 进程的状态

进程的三个基本状态：就绪态、运行态、阻塞态。

* 运行态：进程占有处理机正在运行。
* 就绪态：进程具有除CPU以外的所有所需资源。
* 阻塞态：进程不具备运行条件，正在等待某一事件发生。

> **进程间的状态转换如何分析是被动还是主动?**
> 
> 关键在于看它是否占有处理机(CPU)以及进程是否想运行。
例如:
>
> 运行态->就绪态(被动)：时间片用完了，进程想运行却不能运行，属于被动行为。
>
> 运行态->阻塞态(主动)：因为需要处理某一事件，且当前进程占有处理机器，主动转变为阻塞态。
> 
> 就绪态->运行态(被动)：进程未占有处理机，属于被动行为。

## 进程相关命令

**查看进程**

```
ps aux / ajx
a: 显示终端上的所有进程，包括其他用户的进程
u: 显示进程的详细信息
x: 显示没有控制终端的进程
j: 列出与作业控制相关的信息
``` 

**实时显示进程动态**

```
top
M: 根据内存使用量排序
P: 根据CPU占有率排序
T: 根据进程运行时间长短排序
U: 根据用户名来筛选进程
K: 输入指定的PID杀死进程
```

**结束进程**

```
kill
后接上PID，能够杀死指定进程
-l: 列出所有信号
-9: 9对应SIGKILL信号，能够强制杀死进程

killall name
杀死所有指定进程名的进程
```